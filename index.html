<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>黄琳杰的个人简历</title>
        <link rel="stylesheet" href="./a.css">
        <script src="//at.alicdn.com/t/font_793777_oeq5rqdusg.js"></script>
        <style type="text/css">
            .loading{
                width: 200px;
                height: 200px;
                /* border: 1px solid red; */
                position: relative;
            }
            .loading::before,.loading::after{
                content: '';
                position: absolute;
                width: 0px;
                height: 0px;
                background:black;
                border-radius: 50%;
                top:0;
                left:0;
                right: 0;
                bottom: 0;
                margin: auto;
                animation: s 1.5s linear infinite;
            }
            .loading::after{
                animation-delay: 0.75s;
            }
            @keyframes s{
                0%{
                    width: 0; height: 0; opacity: 1;
                }
                100%{
                    width: 100px; height: 100px; opacity: 0;
                }
            }
            .icon {
               width: 1em; 
               height: 1em;
               vertical-align: -0.15em;
               fill: currentColor;
               overflow: hidden;
            }
            .site-welcome{
                display: none;
                position: fixed;
                top: 0; left: 0; width: 100%; height: 100%;
                background: #888;
                z-index: 1;
                justify-content: center;
                align-items: center;
            }
            .site-welcome.active{
                display: flex;
            }
        </style>
    </head>
    <body>
        <!-- <div id="siteWelcome" class="site-welcome active">
            <div class="loading"></div>
        </div> -->
        <div id="topNavBar" class="topNavBar">
            <div class="topNavBar-inner clearfix">
                <a class="logo" href="#" alt="logo" style="float: left; ">
                    <span class="rs">RS</span><span class="card">card</span>
                </a>
                <nav class="menu" style="float: right;">
                    <ul class="clearfix">
                        <li><a href="#siteAbout">关于</a></li>
                        <li>
                            <a href="#siteSkills">技能</a>
                        </li>
                        <li class="menuTigger">
                            <a href="#siteWorks">作品</a>
                            <ul class="submenu">
                                <li>作品1</li>
                                <li>作品2</li>
                                <li>作品3</li>
                            </ul>
                        </li>
                        <li class="menuTigger">
                            <a href="#">博客</a>
                            <ul class="submenu">
                                <li>博客1</li>
                                <li>博客2</li>
                                <li>博客3</li>
                            </ul>
                        </li>
                        <li><a href="#">日历</a></li>
                        <li><a href="#">联系方式</a></li>
                        <li><a href="#">其他</a></li>
                    </ul>
                </nav> 
            </div>
        </div>
        <div class="banner">
            <div class="mask"></div>
        </div>
            <main>
                <div data-x id="siteAbout" class="userCard">
                    <div class="pictureAndText clearfix">
                        <div class="picture">
                            <img src="./img/startuper-hover-1-299x347.jpg" alt="头像">
                        </div>
                        <div class="text">
                            <span class="welcome">Hello
                                <span class="triangle"></span>
                            </span>
                            <h1>黄琳杰</h1>
                            <p>前端开发工程师</p>
                            <hr>
                            <dl>
                                <dt>年龄</dt>
                                <dd>22</dd>
                                <dt>所在城市</dt>
                                <dd>东莞</dd>
                                <dt>邮箱</dt>
                                <dd>huanglinjay123@outlook.com</dd>
                                <dt>手机</dt>
                                <dd>15866666666</dd>
                            </dl>
                        </div>
                    </div>
                        <footer class="media">
                            <a href="#">
                                <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-github"></use>
                                </svg>
                            </a>
                            <a href="#">
                                <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-icon-zhihu"></use>
                                </svg>
                            </a>
                            <a href="#">
                                <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-qq1"></use>
                                </svg>
                            </a> 
                        </footer>
                    </div>
                <p class="downloadResume-wrapper">
                    <a class="downloadResume" href="./resume.txt" target="_blank" download>下载 PDF 简历</a>
                </p>
            <p class="selfIntroduction">
                黄琳杰，前端工程师。<br>
                技能：前端开发，Rails 开发，Node.js 开发
            </p>
            
            </main>
                <section data-x id="siteSkills" class="skills">
                    <h2>技能</h2>
                    <ol class="clearfix">
                        <li>
                            <h3>HTML 5 &amp; CSS 3</h3>
                            <div class="progressBar">
                                <div class="progress" style="width: 70%;"></div>
                            </div>
                        </li>
                        <li>
                            <h3>JavaScript</h3>
                            <div class="progressBar">
                                <div class="progress" style="width: 60%;"></div>
                            </div>
                        </li>
                        <li>
                            <h3>jQuery.js</h3>
                            <div class="progressBar">
                                <div class="progress" style="width: 50%;"></div>
                            </div>
                        </li>
                        <li>
                            <h3>Vue.js</h3>
                            <div class="progressBar">
                                <div class="progress" style="width: 40%;"></div>
                            </div>
                        </li>
                        <li>
                            <h3>React.js</h3>
                            <div class="progressBar">
                                <div class="progress" style="width: 30%;"></div>
                            </div>
                        </li>
                        <li>
                            <h3>Node.js</h3>
                            <div class="progressBar">
                                <div class="progress" style="width: 50%;"></div>
                            </div>
                        </li>
                    </ol>
                </section>
                <section data-x id="siteWorks" class="portfolio">
                    <h2>作品集</h2>
                    <nav>
                        <ol class="clearfix">
                        <li id="portfolio1">所有</li>
                        <li id="portfolio2">框架</li>
                        <li id="portfolio3">原生JS&amp;CSS</li>
                        </ol>
                        <div id="portfolioBar" class="bar state-1">
                            <div class="bar-inner"></div>
                        </div>
                    </nav>
                        <script>
                           portfolio1.onclick=function(){
                            portfolioBar.className="bar state-1"
                           }
                           portfolio2.onclick=function(){
                            portfolioBar.className="bar state-2"
                           }
                           portfolio3.onclick=function(){
                            portfolioBar.className="bar state-3"
                           }
                        </script>
                <div class="works" style="width: 922px; height: 576px;">
                    <div class="big" style="top: 0px; left: 0px;">
                        <img src="./img/photo-1422480041422-130238c67fe2-1-2-2-1-1-607x576.jpg" alt="作品1">
                    </div>
                    <div class="small" style="top: 0px; right: 0px;">
                        <img src="./img/kaboompics-1-2-1-1-294x278.jpg" alt="作品2">
                    </div>
                    <div class="small" style="top: 298px; right: 0px;">
                        <img src="./img/photo-1421757295538-9c80958e75b0-2-2-1-1-294x278.jpg" alt="作品3">
                    </div> 
                </div>
            
                </section> 
                <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script> <!--引用tween.js库-->
                <script>
                    // setTimeout(function(){
                        // siteWelcome.classList.remove('active')
                    // },1000) 

                    //先遍历标记为'[data-x]'的元素，添加offset类,先都往下100px 
                    let specialTags=document.querySelectorAll('[data-x]')
                    for(let i=0;i<specialTags.length;i++){
                        specialTags[i].classList.add('offset')
                    }

                    findClosest()  //一开始就有往上的动画，其他标记元素滚动到它的位置时才有动画
                    
                    //滚动事件，topNavBar添加类，变白变小，字体颜色改变为黑色
                    window.onscroll=function(x){
                        if(window.scrollY > 0){
                            topNavBar.classList.add('sticky')
                        }else{
                            topNavBar.classList.remove('sticky')
                        }
                        findClosest()
                    }
                    
                    //找到与滚动位移差值最小（最近，视口大部分都是这个标记元素）的标记元素，获取到a和a对应的导航里的li元素，添加'highlight'类高亮导航
                    function findClosest(){
                        let specialTags=document.querySelectorAll('[data-x]')
                        let minIndex=0
                        for(let i=1;i<specialTags.length;i++){
                            if(Math.abs(specialTags[i].offsetTop - window.scrollY)<Math.abs(specialTags[minIndex].offsetTop - window.scrollY)){
                                minIndex=i
                            }
                        }
                        specialTags[minIndex].classList.remove('offset')
                        let id=specialTags[minIndex].id
                        let a=document.querySelector('a[href="#'+ id +'"]')  //获取到标记元素的id对应的a元素
                        let li=a.parentNode
                        let brothersAndMe=li.parentNode.children
                        for(let i=0;i<brothersAndMe.length;i++){
                            brothersAndMe[i].classList.remove('highlight') //高亮前先遍历去除所有之前的高亮
                        }
                        li.classList.add('highlight') //添加高亮
                    }    
                    
                    //鼠标移入高亮导航
                    let liTags=document.querySelectorAll('nav.menu > ul > li')
                    for(let i=0;i<liTags.length;i++){
                        liTags[i].onmouseenter=function(x){
                            x.currentTarget.classList.add('active')
                        }
                        liTags[i].onmouseleave=function(x){
                            x.currentTarget.classList.remove('active')
                        }
                    }
                    let aTags = document.querySelectorAll('nav.menu > ul > li > a')

                    //点击导航栏滚动到相应位置，运用了tween.js去移动
                    function animate(time) {
                        requestAnimationFrame(animate);
                        TWEEN.update(time);
                    }
                    requestAnimationFrame(animate);

                    for(let i=0;i<aTags.length;i++){
                        aTags[i].onclick=function(x){
                            x.preventDefault()
                            let a=x.currentTarget
                            let href=a.getAttribute('href')
                            let element=document.querySelector(href)
                            let top=element.offsetTop
                            
                            let currentTop=window.scrollY
                            let targetTop=top-80
                            let s=targetTop-currentTop
                            var t=Math.abs((s/100)*300)
                            if(t>600){
                                t=600
                            }
                            var coords = { y: currentTop }; 
                            var tween = new TWEEN.Tween(coords) 
                                .to({ y: targetTop }, t) 
                                .easing(TWEEN.Easing.Quadratic.InOut)  //淡进淡出，动画平滑
                                .onUpdate(function() { 
                                    window.scrollTo( 0,coords.y)  // coords.y 值每次都会改变，分为很多次去移 
                                })
                                .start(); 
                               

                        }
                    }
                </script>
    </body>
</html>